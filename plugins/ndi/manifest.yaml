# NDI Plugin Manifest
name: "ndi"
version: "0.1.0"
description: "NDI plugin for orchestrator with web UI and API"
plugin_class: "ndi_plugin:NDIPlugin"

# Plugin settings
settings:
  discovery_timeout: 3.0
  sources: []  # Will be populated dynamically

# API endpoints provided
api_endpoints:
  - path: "/status"
    method: "GET"
    description: "Get NDI plugin status and registry snapshot"
  - path: "/sources"
    method: "GET"
    description: "List available NDI sources"
  - path: "/sources/refresh"
    method: "GET"
    description: "Force refresh NDI sources with longer timeout"
  - path: "/devices"
    method: "GET"
    description: "List devices with NDI capability"
  - path: "/devices/{device_id}"
    method: "GET"
    description: "Get detailed information about a specific NDI device"
  - path: "/start"
    method: "POST"
    description: "Start NDI viewer on device"
  - path: "/stop"
    method: "POST"
    description: "Stop NDI viewer on device"
  - path: "/restart"
    method: "POST"
    description: "Restart NDI viewer on device"
  - path: "/input"
    method: "POST"
    description: "Set NDI input source on device"
  - path: "/record/start"
    method: "POST"
    description: "Start recording NDI stream"
  - path: "/record/stop"
    method: "POST"
    description: "Stop recording NDI stream"
  - path: "/processes/{device_id}"
    method: "GET"
    description: "List NDI processes running on device"
  - path: "/send"
    method: "POST"
    description: "Send NDI command to device (legacy endpoint)"

# UI configuration
ui:
  path: "/ui/ndi"
  template: "ndi.html"
  title: "NDI"

# MQTT topics handled
mqtt_topics:
  - "/lab/orchestrator/ndi/cmd"

# Supported orchestrator actions
actions:
  - name: "start"
    description: "Start NDI viewer on device"
  - name: "stop"
    description: "Stop NDI viewer on device"
  - name: "restart"
    description: "Restart NDI viewer on device"
  - name: "status"
    description: "Get detailed module status"
  - name: "set_input"
    description: "Change NDI input source on device"
  - name: "record_start"
    description: "Start recording on device"
  - name: "record_stop"
    description: "Stop recording on device"
  - name: "list_processes"
    description: "List running NDI processes and their status"
  - name: "reserve"
    description: "Reserve device for exclusive use"
  - name: "release"
    description: "Release device reservation"
  - name: "schedule"
    description: "Schedule commands for later execution"
